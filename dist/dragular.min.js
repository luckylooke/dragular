!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";var n=t(1),o=t(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",n)},function(e,r){"use strict";var t=function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i,a=r.$eval(n.dragular)||o(n.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=r.$eval(a.containersModel)),a&&a.dynamicModelAttribute?r.$watch(function(){return r.$eval(n.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(r.$eval(e)))}):n.dragularModel&&(a.containersModel=r.$eval(n.dragularModel)),n.dragularNameSpace&&(a.nameSpace=n.dragularNameSpace.split(" ")),n.dragularOnInit&&(a.onInit=r.$eval(n.dragularOnInit)),i=e(t[0],a)}}};t.$inject=["dragularService"],e.exports=t},function(e,r){"use strict";var t={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},n=function(e,r){function n(n,s){function h(e){return"function"==typeof e?e:Array.isArray(e)?Array.isArray(e[0])?e:[e]:"string"==typeof e&&le.scope?function(){return le.scope[e]}:[]}function M(){1!==arguments.length||Array.isArray(n)||angular.isElement(n)||n[0]||"string"==typeof n?"string"==typeof n&&(ce=document.querySelectorAll(n)):(ue=n||{},ce=[]),le=ue.copyOptions?angular.copy(ue):ue}function S(){var e=angular.extend({},ge,le);angular.extend(le,e),le.classes&&(e=angular.extend({},de,le.classes),angular.extend(le.classes,e)),le.eventNames&&(e=angular.extend({},me,le.eventNames),angular.extend(le.eventNames,e))}function A(){v(le.boundingBox)||(le.boundingBox=!1),le.containers&&(ce=le.containers),ce=l(ce),le.initialContainers=ce,le.containersModel=h(le.containersModel),Array.isArray(le.containersFilteredModel)?le.containersFilteredModel=Array.isArray(le.containersFilteredModel[0])?le.containersFilteredModel:[le.containersFilteredModel]:le.containersFilteredModel=[],le.nameSpace||(le.nameSpace=["dragularCommon"]),Array.isArray(le.nameSpace)||(le.nameSpace=[le.nameSpace]),le.nameSpace.forEach(function(e){t.containers[e]||(t.containers[e]=[],t.containersCtx[e]=[]);for(var r=ce.length,n=t.containers[e].length,o=0;o<r;o++)t.containers[e][o+n]=ce[o],t.containersCtx[e][o+n]={o:le,m:D(le)[o],fm:le.containersFilteredModel[o]}})}function T(e){var r=e?"off":"on";o(O,r,"mouseup",B),ce.forEach(function(e){o(e,"on","mousedown",$)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=le.eventNames[e];t.dragOverEvents[r]||(Y.createEvent?(t.dragOverEvents[r]=Y.createEvent("HTMLEvents"),t.dragOverEvents[r].initEvent(r,!0,!0)):(t.dragOverEvents[r]=Y.createEventObject(),t.dragOverEvents[r].eventType=r))})}function $(e){if(1===c(e)&&!e.metaKey&&!e.ctrlKey){t.moveX=e.clientX,t.moveY=e.clientY;var r=k(e.target);r&&r.item&&(t.grabbed=r,H(),"mousedown"===e.type&&(C(e.target)?e.target.focus():e.preventDefault()))}}function B(e){if(K(),fe.dragging){e.originalEvent&&(e=e.originalEvent),t.clientX=b("clientX",e),t.clientY=b("clientY",e);var r=ae(t.mirror,t.clientX,t.clientY),n=V(r,t.clientX,t.clientY);n&&(t.copy&&se(le.copySortSource)||!t.copy||n!==t.source)?U(t.item,n):se(le.removeOnSpill)?q():J(),t.target=null,t.lastElementBehindCursor&&N(t.lastElementBehindCursor,t.dragOverEvents.dragularrelease,r),le.scope&&le.scope.$emit(le.eventNames.dragularrelease,t.item,t.source,e)}}function w(e){if(!e)return!1;for(var r=le.nameSpace.length;r--;)if(t.containers[le.nameSpace[r]].indexOf(e)!==-1)return!0;return le.isContainer(e)?(t.tempModel=le.isContainerModel(e),!0):(t.tempModel=null,!1)}function D(e){return"function"==typeof e.containersModel?h(e.containersModel(e===le?fe:null,t)):e.containersModel}function F(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:l(r);e.forEach(function(e){angular.forEach(le.nameSpace,function(r){var n;n=t.containers[r].indexOf(e),t.containers[r].splice(n,1),t.containersCtx[r].splice(n,1)})})})}function H(e){var r=e?"off":"on";o(O,r,"mousemove",P)}function j(e){var r=e?"off":"on";o(O,r,"selectstart",u),o(O,r,"click",u),o(O,r,"touchmove",u)}function L(){T(!0),F(ce),B({})}function P(e){if(t.grabbed&&!fe.dragging){if(e.originalEvent&&(e=e.originalEvent),0===c(e))return void B({});if(!e.clientX||e.clientX!==t.moveX||!e.clientY||e.clientY!==t.moveY){if(se(le.ignoreInputTextSelection)){var r=b("clientX",e),n=b("clientY",e),o=Y.elementFromPoint(r,n);if(C(o))return}var i=t.grabbed;if(H("remove"),j(),z(),W(i),t.item){if(!le.direction&&E(t.sourceItem)){var a=t.sourceItem.parentNode,l=a.offsetHeight,u=a.offsetWidth,s=t.sourceItem.clientHeight,m=t.sourceItem.clientWidth;le.direction=l/s<u/m?"horizontal":"vertical"}var g=d(t.sourceItem);t.offsetX=b("pageX",e)-g.left,t.offsetY=b("pageY",e)-g.top,t.clientX=b("clientX",e),t.clientY=b("clientY",e),le.boundingBox&&(t.offsetXr=b("pageX",e)-g.right,t.offsetYb=b("pageY",e)-g.bottom),e.preventDefault(),te(),y(t.item,le.classes.transit),t.mirror.style.left=t.clientX-t.offsetX+"px",t.mirror.style.top=t.clientY-t.offsetY+"px",Z(e)}}}}function k(e){if(!fe.dragging||!t.mirror){for(var r=e;E(e)&&!w(E(e));){if(le.invalid(e,r))return;if(e=E(e),!e)return}var n=E(e);if(n&&!le.invalid(e,r)&&le.moves(e,n,r,p(e)))return{item:e,source:n}}}function R(e){var r=k(e);r&&(t.grabbed=r,H())}function W(e){t.sourceItem=t.item=e.item,t.source=e.source,t.initialSibling=t.currentSibling=p(e.item),se(le.copy,[e.item,e.source])?(t.item=e.item.cloneNode(!0),t.copy=!0,le.scope&&le.scope.$emit(le.eventNames.dragularcloned,t.item,e.item)):t.copy=!1;var r=ce.indexOf(e.source);return t.sourceModel=D(le)[r],t.sourceFilteredModel=le.containersFilteredModel[r],t.initialIndex=I(e.item,e.source),fe.dragging=!0,le.scope&&le.scope.$emit(le.eventNames.dragulardrag,t.sourceItem,t.source),!0}function z(){fe.dragging&&t.item&&U(t.item,E(t.item))}function K(){t.grabbed=!1,H("remove"),j("remove")}function U(n,o){function i(){if(le.compileItemOnDrop){var e=angular.element(o).scope?angular.element(o).scope():le.scope;e&&e.$applyAsync(function(){var i=r(t.copy?a.cloneNode(!0):a)(e);n.parentNode===o&&o.removeChild(n),o.insertBefore(i[0],l),G()})}le.scope&&(Q(o)?le.scope.$emit(le.eventNames.dragularcancel,n,t.source,t.sourceModel,t.initialIndex):le.scope.$emit(le.eventNames.dragulardrop,n,o,t.source,t.sourceModel,t.initialIndex,t.targetModel,c)),le.compileItemOnDrop||G()}if(!n)return void G();var a=t.sourceItem,l=t.currentSibling,c=I(n,o);t.copy&&o===t.source&&E(n)&&se(le.copySortSource)&&n.parentNode.removeChild(t.sourceItem),t.sourceModel&&!Q(o)?(t.targetCtx&&t.targetCtx.fm&&(c=t.targetCtx.m.indexOf(t.targetCtx.fm[c])),t.sourceFilteredModel&&(t.initialIndex=t.sourceModel.indexOf(t.sourceFilteredModel[t.initialIndex])),e.$applyAsync(function(){t.sourceModel&&(o===t.source?t.sourceModel.splice(c,0,t.sourceModel.splice(t.initialIndex,1)[0]):(t.dropElmModel=t.copy&&!le.dontCopyModel?angular.copy(t.sourceModel[t.initialIndex]):t.sourceModel[t.initialIndex],t.tempModel?t.targetModel=t.tempModel:t.targetModel=t.targetCtx&&t.targetCtx.m||t.sourceModel,o.removeChild(n),t.copy||t.sourceModel.splice(t.initialIndex,1),t.targetModel&&t.targetModel.splice(c,0,t.dropElmModel)),E(n)&&n.parentNode.removeChild(n),i())})):i()}function q(){if(fe.dragging){var r=E(t.item);r&&r.removeChild(t.item),t.sourceModel&&e.$applyAsync(function(){t.sourceModel.splice(t.initialIndex,1),G()}),le.scope&&le.scope.$emit(t.copy?le.eventNames.dragularcancel:le.eventNames.dragularremove,t.item,r,t.sourceModel,t.initialIndex),t.sourceModel||G()}}function J(e){if(fe.dragging){var r=arguments.length>0?e:se(le.revertOnSpill),n=E(t.item),o=Q(n);o||t.copy||!r||t.source.insertBefore(t.item,t.initialSibling),!t.sourceModel||t.copy||r?le.scope&&(o||r)&&le.scope.$emit(le.eventNames.dragularcancel,t.item,t.source,t.sourceModel,t.initialIndex):U(t.item,n),(!t.sourceModel||t.copy||r||o)&&G()}}function G(){K(),ne(),t.item&&x(t.item,le.classes.transit),fe.dragging=!1,se(le.removeOnSpill)===!0&&ee(),le.scope&&(t.lastDropTarget&&le.scope.$emit(le.eventNames.dragularout,t.item,t.lastDropTarget,t.source),le.scope.$emit(le.eventNames.dragulardragend,t.item)),t.source=t.item=t.sourceItem=t.initialSibling=t.currentSibling=t.sourceModel=null,t.initialIndex=t.currentIndex=t.lastDropTarget=t.tempModel=t.targetModel=null,t.dropElmModel=t.targetCtx=t.copy=t.moveX=t.moveY=null}function Q(e,r){var n=r||(t.mirror?t.currentSibling:p(t.item));return e===t.source&&n===t.initialSibling}function V(e,r,n){function o(){if(!w(a))return!1;for(var o,c=oe(a,e),u=ie(a,c,r,n),s=Q(a,u),d=le.nameSpace.length;d--;)if(o=le.nameSpace[d],t.containers[o].indexOf(a)!==-1){l=i(o);break}return t.target=a,!!s||(l||(l=i("dragularCommon")),l&&"function"==typeof l.o.containersModel&&(l.m=D(l.o)[l.o.initialContainers.indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!(le.isContainer&&le.isContainerAccepts&&!le.isContainerAccepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!le.canBeAccepted||le.canBeAccepted(t.item,a,t.source,u,t.sourceModel,t.initialIndex))))}function i(e){return t.containersCtx[e][t.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=E(a);return t.targetCtx=l||{},a}function Z(e){function r(r){le.scope&&le.scope.$emit(le.eventNames["dragular"+r],t.item,t.lastDropTarget,t.source,e),se(le.removeOnSpill)===!0&&("over"===r?_():ee())}if(t.mirror){e.originalEvent&&(e=e.originalEvent),t.clientX=b("clientX",e),t.clientY=b("clientY",e);var n,o,i,a=t.clientX-t.offsetX,l=t.clientY-t.offsetY;le.boundingBox&&(n=b("pageX",e),o=b("pageY",e),i=d(le.boundingBox)),le.lockY||(!le.boundingBox||n>i.left+t.offsetX&&n<i.right+t.offsetXr?t.mirror.style.left=a+"px":le.boundingBox&&(n<i.left+t.offsetX?t.mirror.style.left=t.clientX-(n-i.left)+"px":t.mirror.style.left=t.clientX-t.mirrorWidth-(n-i.right)+"px")),le.lockX||(!le.boundingBox||o>i.top+t.offsetY&&o<i.bottom+t.offsetYb?t.mirror.style.top=l+"px":le.boundingBox&&(o<i.top+t.offsetY?t.mirror.style.top=t.clientY-(o-i.top)+"px":t.mirror.style.top=t.clientY-t.mirrorHeight-(o-i.bottom)+"px"));var c=ae(t.mirror,t.clientX,t.clientY),u=V(c,t.clientX,t.clientY),s=u!==t.lastDropTarget;if(c!==t.lastElementBehindCursor&&(N(c,t.dragOverEvents.dragularenter,!!u),t.lastElementBehindCursor&&N(t.lastElementBehindCursor,t.dragOverEvents.dragularleave,c),t.lastElementBehindCursor=c),s&&(t.lastDropTarget&&r("out"),t.lastDropTarget=u,r("over")),u===t.source&&t.copy&&!se(le.copySortSource))return void(E(t.item)&&t.item.parentNode.removeChild(t.item));var m,g=oe(u,c);if(null!==g)m=ie(u,g,t.clientX,t.clientY);else{if(se(le.revertOnSpill)!==!0||t.copy)return void(t.copy&&E(t.item)&&t.item.parentNode.removeChild(t.item));m=t.initialSibling,u=t.source}(null===m||m!==t.item&&m!==p(t.item)&&m!==t.currentSibling)&&(t.currentSibling=m,u.insertBefore(t.item,m),le.scope&&le.scope.$emit(le.eventNames.dragularshadow,t.item,u,e))}}function _(){x(t.item,le.classes.hide)}function ee(){fe.dragging&&y(t.item,le.classes.hide)}function re(e){if(t.target){e.originalEvent&&(e=e.originalEvent);var r=t.target.scrollTop;t.target.scrollTop+=e.deltaY,r!==t.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function te(){if(!t.mirror){var e=t.sourceItem.getBoundingClientRect();t.mirror=t.sourceItem.cloneNode(!0),t.mirrorWidth=e.width,t.mirrorHeight=e.height,t.mirror.style.width=m(e)+"px",t.mirror.style.height=g(e)+"px",y(t.mirror,le.classes.mirror),le.mirrorContainer.appendChild(t.mirror),o(O,"on","mousemove",Z),y(Y.body,le.classes.unselectable),o(t.mirror,"on","wheel",re),le.scope&&le.scope.$emit(le.eventNames.dragularcloned,t.mirror,t.sourceItem)}}function ne(){t.mirror&&(x(Y.body,le.classes.unselectable),o(O,"off","mousemove",Z),o(t.mirror,"off","wheel",re),E(t.mirror)&&t.mirror.parentNode.removeChild(t.mirror),t.mirror=null)}function oe(e,r){for(var t=r;t!==e&&E(t)!==e;)t=E(t);return t===O?null:t}function ie(e,r,t,n){function o(){var r,o,i,a=e.children.length;for(r=0;r<a;r++){if(o=e.children[r],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>n)return o}return null}function i(){var e=r.getBoundingClientRect();return a(l?t>e.left+m(e)/2:n>e.top+g(e)/2)}function a(e){return e?p(r):r}var l="horizontal"===le.direction;return r!==e?i():o()}function ae(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+le.classes.hide,n=Y.elementFromPoint(r,t),o.className=i,n}var le,ce=n||[],ue=s||{},se=X,de={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},me={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},ge={copyOptions:!1,classes:de,eventNames:me,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:i,isContainerModel:f,isContainerAccepts:a,moves:a,accepts:a,canBeAccepted:a,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:i,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:Y.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},fe={containers:t.containers,containersCtx:t.containersCtx,sanitizeContainersModel:h,isContainer:w,start:R,end:z,cancel:J,remove:q,destroy:L,dragging:!1};return M(),S(),A(),T(),le.onInit&&le.onInit(fe,le),fe}function o(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[r]](t,n,{passive:!1}),e[c[r]](o[t],n,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[t]?l[r](i[t],n):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[t]?l[r](a[t],n):o[t]&&l[r](o[t],n),l[r](t,n)}function i(){return!1}function a(){return!0}function l(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function c(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function u(e){e.originalEvent&&(e=e.originalEvent),t.grabbed&&e.preventDefault()}function s(e,r){return"undefined"!=typeof window[r]?window[r]:O.clientHeight?O[e]:Y.body[e]}function d(e){var r=e.getBoundingClientRect(),t=s("scrollTop","pageYOffset"),n=s("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function m(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function f(){return{}}function p(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}if(e)return e.nextElementSibling||r()}function v(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function h(e){var r=t.classesCache[e];return r?r.lastIndex=0:t.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function y(e,r){var t=e.className;t.length?h(r).test(t)||(e.className+=" "+r):e.className=r}function x(e,r){e.className=e.className.replace(h(r)," ").trim()}function M(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,r){var t=M(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")===-1&&t.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function C(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||S(E(e))))}function I(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function N(e,r,n){e&&(t.extra=n,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}function X(e,r,n){return angular.isFunction(e)?!!e.apply(n||this,r||t):!!e}var Y=document,O=Y.documentElement;return n.cleanEnviroment=function(){t.classesCache={},t.containersCtx={},t.containers={},t.mirror=void 0},n.shared=t,n};n.$inject=["$rootScope","$compile"],e.exports=n}])});
//# sourceMappingURL=dragular.min.js.map
