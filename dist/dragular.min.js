!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n=r();for(var t in n)("object"==typeof exports?exports:e)[t]=n[t]}}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){"use strict";var t=n(1),o=n(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",t)},function(e,r){"use strict";var n=function(e){return{restrict:"A",link:function(r,n,t){function o(e){try{return JSON.parse(e)}catch(r){return}}var i,a=r.$eval(t.dragular)||o(t.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=r.$eval(a.containersModel)),a&&a.dynamicModelAttribute?r.$watch(function(){return r.$eval(t.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(r.$eval(e)))}):t.dragularModel&&(a.containersModel=r.$eval(t.dragularModel)),t.dragularNameSpace&&(a.nameSpace=t.dragularNameSpace.split(" ")),t.dragularOnInit&&(a.onInit=r.$eval(t.dragularOnInit)),i=e(n[0],a)}}};n.$inject=["dragularService"],e.exports=n},function(e,r){"use strict";var n={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},t=function(e,r){function t(t,s){function h(e){return"function"==typeof e?e:Array.isArray(e)?Array.isArray(e[0])?e:[e]:"string"==typeof e&&(le.scope||le.containersModelCtx)?function(){return le.containersModelCtx?le.containersModelCtx[e]:le.scope[e]}:[]}function M(){1!==arguments.length||Array.isArray(t)||angular.isElement(t)||t[0]||"string"==typeof t?"string"==typeof t&&(ce=document.querySelectorAll(t)):(ue=t||{},ce=[]),le=ue.copyOptions?angular.copy(ue):ue}function S(){var e=angular.extend({},me,le);angular.extend(le,e),le.classes&&(e=angular.extend({},de,le.classes),angular.extend(le.classes,e)),le.eventNames&&(e=angular.extend({},ge,le.eventNames),angular.extend(le.eventNames,e))}function T(){v(le.boundingBox)||(le.boundingBox=!1),le.containers&&(ce=le.containers),ce=l(ce),le.initialContainers=ce,le.containersModel=h(le.containersModel),Array.isArray(le.containersFilteredModel)?le.containersFilteredModel=Array.isArray(le.containersFilteredModel[0])?le.containersFilteredModel:[le.containersFilteredModel]:le.containersFilteredModel=[],le.nameSpace||(le.nameSpace=["dragularCommon"]),Array.isArray(le.nameSpace)||(le.nameSpace=[le.nameSpace]),le.nameSpace.forEach(function(e){n.containers[e]||(n.containers[e]=[],n.containersCtx[e]=[]);for(var r=ce.length,t=n.containers[e].length,o=0;o<r;o++)n.containers[e][o+t]=ce[o],n.containersCtx[e][o+t]={o:le,m:F(le)[o],fm:le.containersFilteredModel[o]}})}function A(e){var r=e?"off":"on";o(O,r,"mouseup",B),ce.forEach(function(e){o(e,"on","mousedown",$)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=le.eventNames[e];n.dragOverEvents[r]||(Y.createEvent?(n.dragOverEvents[r]=Y.createEvent("HTMLEvents"),n.dragOverEvents[r].initEvent(r,!0,!0)):(n.dragOverEvents[r]=Y.createEventObject(),n.dragOverEvents[r].eventType=r))})}function $(e){if(1===c(e)&&!e.metaKey&&!e.ctrlKey){n.moveX=e.clientX,n.moveY=e.clientY;var r=R(e.target);r&&r.item&&(n.grabbed=r,H(),"mousedown"===e.type&&(C(e.target)?e.target.focus():e.preventDefault()))}}function B(e){if(K(),fe.dragging){e.originalEvent&&(e=e.originalEvent),n.clientX=b("clientX",e),n.clientY=b("clientY",e);var r=ae(n.mirror,n.clientX,n.clientY),t=V(r,n.clientX,n.clientY);t&&(n.copy&&se(le.copySortSource)||!n.copy||t!==n.source)?U(n.item,t):se(le.removeOnSpill)?q():J(),n.target=null,n.lastElementBehindCursor&&I(n.lastElementBehindCursor,n.dragOverEvents.dragularrelease,r),le.scope&&le.scope.$emit(le.eventNames.dragularrelease,n.item,n.source,e)}}function w(e){if(!e)return!1;for(var r=le.nameSpace.length;r--;)if(n.containers[le.nameSpace[r]].indexOf(e)!==-1)return!0;return le.isContainer(e)?(n.tempModel=le.isContainerModel(e),!0):(n.tempModel=null,!1)}function F(e){return"function"==typeof e.containersModel?h(e.containersModel(e===le?fe:null,n)):e.containersModel}function D(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:l(r);e.forEach(function(e){angular.forEach(le.nameSpace,function(r){var t;t=n.containers[r].indexOf(e),n.containers[r].splice(t,1),n.containersCtx[r].splice(t,1)})})})}function H(e){var r=e?"off":"on";o(O,r,"mousemove",k)}function j(e){var r=e?"off":"on";o(O,r,"selectstart",u),o(O,r,"click",u),o(O,r,"touchmove",u)}function P(){A(!0),D(ce),B({})}function k(e){if(n.grabbed&&!fe.dragging){if(e.originalEvent&&(e=e.originalEvent),0===c(e))return void B({});if(!e.clientX||e.clientX!==n.moveX||!e.clientY||e.clientY!==n.moveY){if(se(le.ignoreInputTextSelection)){var r=b("clientX",e),t=b("clientY",e),o=Y.elementFromPoint(r,t);if(C(o))return}var i=n.grabbed;if(H("remove"),j(),z(),W(i),!le.direction&&E(n.sourceItem)){var a=n.sourceItem.parentNode,l=a.offsetHeight,u=a.offsetWidth,s=n.sourceItem.clientHeight,g=n.sourceItem.clientWidth;le.direction=l/s<u/g?"horizontal":"vertical"}var m=d(n.sourceItem);n.offsetX=b("pageX",e)-m.left,n.offsetY=b("pageY",e)-m.top,n.clientX=b("clientX",e),n.clientY=b("clientY",e),le.boundingBox&&(n.offsetXr=b("pageX",e)-m.right,n.offsetYb=b("pageY",e)-m.bottom),e.preventDefault(),ne(),y(n.item,le.classes.transit),n.mirror.style.left=n.clientX-n.offsetX+"px",n.mirror.style.top=n.clientY-n.offsetY+"px",Z(e)}}}function R(e){if(!fe.dragging||!n.mirror){for(var r=e;E(e)&&!w(E(e));){if(le.invalid(e,r))return;if(e=E(e),!e)return}var t=E(e);if(t&&!le.invalid(e,r)&&le.moves(e,t,r,p(e)))return{item:e,source:t}}}function L(e){var r=R(e);r&&(n.grabbed=r,H())}function W(e){n.sourceItem=n.item=e.item,n.source=e.source,n.initialSibling=n.currentSibling=p(e.item),se(le.copy,[e.item,e.source])?(n.item=e.item.cloneNode(!0),n.copy=!0,le.scope&&le.scope.$emit(le.eventNames.dragularcloned,n.item,e.item)):n.copy=!1;var r=ce.indexOf(e.source);return n.sourceModel=F(le)[r],n.sourceFilteredModel=le.containersFilteredModel[r],n.initialIndex=N(e.item,e.source),fe.dragging=!0,le.scope&&le.scope.$emit(le.eventNames.dragulardrag,n.sourceItem,n.source),!0}function z(){fe.dragging&&n.item&&U(n.item,E(n.item))}function K(){n.grabbed=!1,H("remove"),j("remove")}function U(t,o){function i(){if(le.compileItemOnDrop){var e=angular.element(o).scope();e.$applyAsync(function(){var i=r(n.copy?a.cloneNode(!0):a)(e);t.parentNode===o&&o.removeChild(t),o.insertBefore(i[0],l)})}le.scope&&(Q(o)?le.scope.$emit(le.eventNames.dragularcancel,t,n.source,n.sourceModel,n.initialIndex):le.scope.$emit(le.eventNames.dragulardrop,t,o,n.source,n.sourceModel,n.initialIndex,n.targetModel,c)),G()}if(!t)return void G();var a=n.sourceItem,l=n.currentSibling,c=N(t,o);n.copy&&se(le.copySortSource)&&o===n.source&&E(t)&&t.parentNode.removeChild(n.sourceItem),n.sourceModel&&!Q(o)?(n.targetCtx.fm&&(c=n.targetCtx.m.indexOf(n.targetCtx.fm[c])),n.sourceFilteredModel&&(n.initialIndex=n.sourceModel.indexOf(n.sourceFilteredModel[n.initialIndex])),e.$applyAsync(function(){n.sourceModel&&(o===n.source?n.sourceModel.splice(c,0,n.sourceModel.splice(n.initialIndex,1)[0]):(n.dropElmModel=n.copy&&!le.dontCopyModel?angular.copy(n.sourceModel[n.initialIndex]):n.sourceModel[n.initialIndex],n.tempModel?n.targetModel=n.tempModel:n.targetModel=n.targetCtx.m,o.removeChild(t),n.copy||n.sourceModel.splice(n.initialIndex,1),n.targetModel&&n.targetModel.splice(c,0,n.dropElmModel)),E(t)&&t.parentNode.removeChild(t),i())})):i()}function q(){if(fe.dragging){var r=E(n.item);r&&r.removeChild(n.item),n.sourceModel&&e.$applyAsync(function(){n.sourceModel.splice(n.initialIndex,1),G()}),le.scope&&le.scope.$emit(n.copy?le.eventNames.dragularcancel:le.eventNames.dragularremove,n.item,r,n.sourceModel,n.initialIndex),n.sourceModel||G()}}function J(e){if(fe.dragging){var r=arguments.length>0?e:se(le.revertOnSpill),t=E(n.item),o=Q(t);o||n.copy||!r||n.source.insertBefore(n.item,n.initialSibling),!n.sourceModel||n.copy||r?le.scope&&(o||r)&&le.scope.$emit(le.eventNames.dragularcancel,n.item,n.source,n.sourceModel,n.initialIndex):U(n.item,t),(!n.sourceModel||n.copy||r||o)&&G()}}function G(){K(),te(),n.item&&x(n.item,le.classes.transit),fe.dragging=!1,se(le.removeOnSpill)===!0&&ee(),le.scope&&(n.lastDropTarget&&le.scope.$emit(le.eventNames.dragularout,n.item,n.lastDropTarget,n.source),le.scope.$emit(le.eventNames.dragulardragend,n.item)),n.source=n.item=n.sourceItem=n.initialSibling=n.currentSibling=n.sourceModel=null,n.initialIndex=n.currentIndex=n.lastDropTarget=n.tempModel=n.targetModel=null,n.dropElmModel=n.targetCtx=n.copy=n.moveX=n.moveY=null}function Q(e,r){var t=r||(n.mirror?n.currentSibling:p(n.item));return e===n.source&&t===n.initialSibling}function V(e,r,t){function o(){var o=!1;if(w(a)){for(var c,u=oe(a,e),s=ie(a,u,r,t),d=Q(a,s),g=le.nameSpace.length;g--;)if(c=le.nameSpace[g],n.containers[c].indexOf(a)!==-1){l=i(c);break}l||(l=i("dragularCommon")),l&&"function"==typeof l.o.containersModel&&(l.m=F(l.o)[l.o.initialContainers.indexOf(a)]),o=d||!l||l.o.accepts(n.item,a,n.source,s,n.sourceModel,n.initialIndex)&&le.canBeAccepted(n.item,a,n.source,s,n.sourceModel,n.initialIndex),l||(l={}),n.target!==a&&(n.target=a)}return o}function i(e){return n.containersCtx[e][n.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=E(a);return n.targetCtx=l,a}function Z(e){function r(r){le.scope&&le.scope.$emit(le.eventNames["dragular"+r],n.item,n.lastDropTarget,n.source,e),se(le.removeOnSpill)===!0&&("over"===r?_():ee())}if(n.mirror){e.originalEvent&&(e=e.originalEvent),n.clientX=b("clientX",e),n.clientY=b("clientY",e);var t,o,i,a=n.clientX-n.offsetX,l=n.clientY-n.offsetY;le.boundingBox&&(t=b("pageX",e),o=b("pageY",e),i=d(le.boundingBox)),le.lockY||(!le.boundingBox||t>i.left+n.offsetX&&t<i.right+n.offsetXr?n.mirror.style.left=a+"px":le.boundingBox&&(t<i.left+n.offsetX?n.mirror.style.left=n.clientX-(t-i.left)+"px":n.mirror.style.left=n.clientX-n.mirrorWidth-(t-i.right)+"px")),le.lockX||(!le.boundingBox||o>i.top+n.offsetY&&o<i.bottom+n.offsetYb?n.mirror.style.top=l+"px":le.boundingBox&&(o<i.top+n.offsetY?n.mirror.style.top=n.clientY-(o-i.top)+"px":n.mirror.style.top=n.clientY-n.mirrorHeight-(o-i.bottom)+"px"));var c=ae(n.mirror,n.clientX,n.clientY),u=V(c,n.clientX,n.clientY),s=u!==n.lastDropTarget;if(c!==n.lastElementBehindCursor&&(I(c,n.dragOverEvents.dragularenter,!!u),n.lastElementBehindCursor&&I(n.lastElementBehindCursor,n.dragOverEvents.dragularleave,c),n.lastElementBehindCursor=c),s&&(n.lastDropTarget&&r("out"),n.lastDropTarget=u,r("over")),u===n.source&&n.copy&&!se(le.copySortSource))return void(E(n.item)&&n.item.parentNode.removeChild(n.item));var g,m=oe(u,c);if(null!==m)g=ie(u,m,n.clientX,n.clientY);else{if(se(le.revertOnSpill)!==!0||n.copy)return void(n.copy&&E(n.item)&&n.item.parentNode.removeChild(n.item));g=n.initialSibling,u=n.source}(null===g||g!==n.item&&g!==p(n.item)&&g!==n.currentSibling)&&(n.currentSibling=g,u.insertBefore(n.item,g),le.scope&&le.scope.$emit(le.eventNames.dragularshadow,n.item,u,e))}}function _(){x(n.item,le.classes.hide)}function ee(){fe.dragging&&y(n.item,le.classes.hide)}function re(e){if(n.target){e.originalEvent&&(e=e.originalEvent);var r=n.target.scrollTop;n.target.scrollTop+=e.deltaY,r!==n.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function ne(){if(!n.mirror){var e=n.sourceItem.getBoundingClientRect();n.mirror=n.sourceItem.cloneNode(!0),n.mirrorWidth=e.width,n.mirrorHeight=e.height,n.mirror.style.width=g(e)+"px",n.mirror.style.height=m(e)+"px",y(n.mirror,le.classes.mirror),le.mirrorContainer.appendChild(n.mirror),o(O,"on","mousemove",Z),y(Y.body,le.classes.unselectable),o(n.mirror,"on","wheel",re),le.scope&&le.scope.$emit(le.eventNames.dragularcloned,n.mirror,n.sourceItem)}}function te(){n.mirror&&(x(Y.body,le.classes.unselectable),o(O,"off","mousemove",Z),o(n.mirror,"off","wheel",re),E(n.mirror)&&n.mirror.parentNode.removeChild(n.mirror),n.mirror=null)}function oe(e,r){for(var n=r;n!==e&&E(n)!==e;)n=E(n);return n===O?null:n}function ie(e,r,n,t){function o(){var r,o,i,a=e.children.length;for(r=0;r<a;r++){if(o=e.children[r],i=o.getBoundingClientRect(),l&&i.left>n)return o;if(!l&&i.top>t)return o}return null}function i(){var e=r.getBoundingClientRect();return a(l?n>e.left+g(e)/2:t>e.top+m(e)/2)}function a(e){return e?p(r):r}var l="horizontal"===le.direction;return r!==e?i():o()}function ae(e,r,n){var t,o=e||{},i=o.className;return o.className+=" "+le.classes.hide,t=Y.elementFromPoint(r,n),o.className=i,t}var le,ce=t||[],ue=s||{},se=X,de={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ge={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},me={copyOptions:!1,classes:de,eventNames:ge,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:i,isContainerModel:f,moves:a,accepts:a,canBeAccepted:a,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:i,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:Y.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},fe={containers:n.containers,containersCtx:n.containersCtx,sanitizeContainersModel:h,isContainer:w,start:L,end:z,cancel:J,remove:q,destroy:P,dragging:!1};return M(),S(),T(),A(),le.onInit&&le.onInit(fe),fe}function o(e,r,n,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[n]?l[r](i[n],t):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[n]?l[r](a[n],t):o[n]&&l[r](o[n],t),l[r](n,t)}function i(){return!1}function a(){return!0}function l(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function c(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function u(e){e.originalEvent&&(e=e.originalEvent),n.grabbed&&e.preventDefault()}function s(e,r){return"undefined"!=typeof window[r]?window[r]:O.clientHeight?O[e]:Y.body[e]}function d(e){var r=e.getBoundingClientRect(),n=s("scrollTop","pageYOffset"),t=s("scrollLeft","pageXOffset");return{left:r.left+t,right:r.right+t,top:r.top+n,bottom:r.bottom+n}}function g(e){return e.width||e.right-e.left}function m(e){return e.height||e.bottom-e.top}function f(){return{}}function p(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}if(e)return e.nextElementSibling||r()}function v(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function h(e){var r=n.classesCache[e];return r?r.lastIndex=0:n.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function y(e,r){var n=e.className;n.length?h(r).test(n)||(e.className+=" "+r):e.className=r}function x(e,r){e.className=e.className.replace(h(r)," ").trim()}function M(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,r){var n=M(r),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in n)&&t[e]in n&&(e=t[e]),!n.type||n.type.indexOf("touch")<0?n[e]:n.type.indexOf("end")===-1&&n.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function C(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||S(E(e))))}function N(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function I(e,r,t){e&&(n.extra=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}function X(e,r,t){return angular.isFunction(e)?!!e.apply(t||this,r||n):!!e}var Y=document,O=Y.documentElement;return t.cleanEnviroment=function(){n.classesCache={},n.containersCtx={},n.containers={},n.mirror=void 0},t.shared=n,t};t.$inject=["$rootScope","$compile"],e.exports=t}])});
//# sourceMappingURL=dragular.min.js.map
